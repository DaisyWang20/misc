# Sample .bashrc for SuSE Linux
# Copyright (c) SuSE GmbH Nuernberg

# There are 3 different types of shells in bash: the login shell, normal shell
# and interactive shell. Login shells read ~/.profile and interactive shells
# read ~/.bashrc; in our setup, /etc/profile sources ~/.bashrc - thus all
# settings made here will also take effect in a login shell.
#
# NOTE: It is recommended to make language settings in ~/.profile rather than
# here, since multilingual X sessions would not work properly if LANG is over-
# ridden in every subshell.

# Some applications read the EDITOR variable to determine your favourite text
# editor. So uncomment the line below and enter the editor of your choice :-)
#export EDITOR=/usr/bin/vim
#export EDITOR=/usr/bin/mcedit

# For some news readers it makes sense to specify the NEWSSERVER variable here
#export NEWSSERVER=your.news.server

# If you want to use a Palm device with Linux, uncomment the two lines below.
# For some (older) Palm Pilots, you might need to set a lower baud rate
# e.g. 57600 or 38400; lowest is 9600 (very slow!)
#
#export PILOTPORT=/dev/pilot
#export PILOTRATE=115200

test -s ~/.alias && . ~/.alias || true

# Start-up programs and settings

## Activate python virtual environment
if [ -z "$PY_ACTIVATED" ]; then
	source $HOME/soft/venv/bin/activate
	export PY_ACTIVATED=1
fi

## Set auto-complete for ssh, scp and rsync
hosts=$(grep 'Host ' $HOME/.ssh/config | sort -u | awk '{print $2}')
complete -W "$hosts" ssh
complete -o default -W "$hosts" scp rsync
unset hosts

## Set colors for ls
eval $(dircolors -b $HOME/.dircolors)


# Environment variables

## Shell prompt
## 30-black, 31-red, 32-green, 33-yellow
## 34-blue, 35-magenta, 36-cyan, 37-white
CU="\[\e[32;1m\]"
CH="\[\e[32;1m\]"
CW="\[\e[34;1m\]"
C0="\[\e[0m\]"
#export PS1="$CU\u$CH@\h:$CW\w$CU>$C0 "
export PS1="$CU[\u$CH@\h $CW\W$CU]\$$C0 "
unset CU CH CW C0

## for programs
modadd() {
    for preset in $(echo $1 | sed 's/+/ /g'); do
        case $preset in
        bin)
            export PATH=$2:$PATH
            ;;
        lib)
            export LIBRARY_PATH=$2:$LIBRARY_PATH
            export LD_LIBRARY_PATH=$2:$LD_LIBRARY_PATH
            ;;
        inc)
            export C_INCLUDE_PATH=$2:$C_INCLUDE_PATH
            export CXX_INCLUDE_PATH=$2:$CXX_INCLUDE_PATH 
            ;;
        config)
            export PKG_CONFIG_PATH=$2:$PKG_CONFIG_PATH
            ;;
        py)
            export PYTHONPATH=$2:$PYTHONPATH
            ;;
        pkg)
            test -d $2/bin && modadd bin $2/bin
            test -d $2/lib && modadd lib $2/lib
            test -d $2/lib64 && modadd lib $2/lib64
            test -d $2/include && modadd inc $2/include
            test -d $2/lib/pkgconfig && modadd config $2/lib/pkgconfig
            test -d $2/lib64/pkgconfig && modadd config $2/lib64/pkgconfig
            ;;
        *) 
            echo "Illegal preset: $preset"
        esac
    done
}
if [ -z "$ENV_SET" ]; then
    modadd bin+lib $HOME/soft/xcrysden-1.6.2-bin-shared
    modadd bin+lib $HOME/soft/doublecmd
    modadd bin $HOME/soft/Typora-linux-x64
    export TEXMACS_PATH=$HOME/soft/texmacs-1.99.13
    modadd bin $TEXMACS_PATH/bin
    export ENV_SET=1
fi
ulimit -s unlimited
